<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Product</title>

    <style>
        .image-box {
            border: 2px dashed #888;
            padding: 20px;
            text-align: center;
            width: 200px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
    </style>

</head>
<body>

    <h2>Add Product</h2>

    <form id="productForm" enctype="multipart/form-data">

        <label>Product Name:</label><br>
        <input type="text" name="name" required><br><br>

        <label>Description:</label><br>
        <textarea name="description" required></textarea><br><br>

        <label>Rating (1-5):</label><br>
        <input type="number" name="rating" min="1" max="5" value="5" required><br><br>

        <label>Total Price:</label><br>
        <input type="number" name="totalPrice" required><br><br>

        <label>Offer Price:</label><br>
        <input type="number" name="offerPrice" required><br><br>

        <h3>Upload Product Images (1â€“4 images)</h3>

        <div class="container">
            <div class="image-box">Image 1<br><input type="file" name="images" accept="image/*"></div>
            <div class="image-box">Image 2<br><input type="file" name="images" accept="image/*"></div>
            <div class="image-box">Image 3<br><input type="file" name="images" accept="image/*"></div>
            <div class="image-box">Image 4<br><input type="file" name="images" accept="image/*"></div>
        </div>

        <br>
        <button type="submit">Upload Product</button>

    </form>

    <pre id="result"></pre>

    <script>
        document.getElementById("productForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const formData = new FormData();

            formData.append("name", e.target.name.value);
            formData.append("description", e.target.description.value);
            formData.append("rating", e.target.rating.value);
            formData.append("totalPrice", e.target.totalPrice.value);
            formData.append("offerPrice", e.target.offerPrice.value);

            const imageInputs = document.querySelectorAll("input[type=file]");

            let imageCount = 0;
            imageInputs.forEach(input => {
                if (input.files.length > 0) {
                    formData.append("images", input.files[0]);
                    imageCount++;
                }
            });

            if (imageCount === 0) {
                alert("Please upload at least ONE image.");
                return;
            }

            const response = await fetch(
                "https://ecommerce-app-ci4j.onrender.com/api/products/create",
                {
                    method: "POST",
                    body: formData
                }
            );

            const result = await response.json();
            document.getElementById("result").innerText = JSON.stringify(result, null, 2);
        });
    </script>

</body>
</html>

